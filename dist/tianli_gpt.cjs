(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(":root{--heo-white: #fff;--heo-white-op: rgba(255, 255, 255, .2);--heo-black: #000;--heo-black-op: rgba(0, 0, 0, .2);--heo-none: #00000000;--heo-gray: #999999;--heo-gray-op: #9999992b;--heo-vip: #e5a80d;--heo-main: var(--heo-theme);--heo-main-op: var(--heo-theme-op);--heo-main-op-deep: var(--heo-theme-op-deep);--heo-main-none: var(--heo-theme-none);--heo-shadow-theme: 0 8px 12px -3px var(--heo-theme-op);--heo-shadow-blackdeep: 0 2px 16px -3px rgba(0, 0, 0, .15);--heo-shadow-main: 0 8px 12px -3px var(--heo-main-op);--heo-shadow-blue: 0 8px 12px -3px rgba(40, 109, 234, .2);--heo-shadow-white: 0 8px 12px -3px rgba(255, 255, 255, .2);--heo-shadow-black: 0 0 12px 4px rgba(0, 0, 0, .05);--heo-shadow-yellow: 0px 38px 77px -26px rgba(255, 201, 62, .12);--heo-shadow-red: 0 8px 12px -3px #ee7d7936;--heo-shadow-green: 0 8px 12px -3px #87ee7936;--heo-logo-color: linear-gradient(215deg, #4584ff 0%, #cf0db9 100%);--heo-snackbar-time: 5s;--heo-theme: #425aef;--heo-theme-op: #4259ef23;--heo-theme-op-deep: #4259efdd;--heo-theme-none: #4259ef01;--heo-blue: #425aef;--heo-red: #f04a63;--heo-pink: #ff7c7c;--heo-green: #57bd6a;--heo-yellow: #c28b00;--heo-yellow-op: #d99c001a;--heo-orange: #e38100;--heo-fontcolor: #363636;--heo-background: #f7f9fe;--heo-reverse: #000;--heo-maskbg: rgba(255, 255, 255, .6);--heo-maskbgdeep: rgba(255, 255, 255, .85);--heo-hovertext: var(--heo-main);--heo-ahoverbg: #f7f7fa;--heo-lighttext: var(--heo-main);--heo-secondtext: rgba(60, 60, 67, .8);--heo-scrollbar: rgba(60, 60, 67, .4);--heo-card-btn-bg: #edf0f7;--heo-post-blockquote-bg: #fafcff;--heo-post-tabs-bg: #f2f5f8;--heo-secondbg: #f1f3f8;--heo-shadow-nav: 0 5px 12px -5px rgba(102, 68, 68, .05);--heo-card-bg: #fff;--heo-card-bg-op: var(--heo-black-op);--heo-card-bg-none: rgba(255, 255, 255, 0);--heo-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-card-border: #e3e8f7;--heo-shadow-border: 0 8px 16px -4px #2c2d300c;--style-border: 1px solid var(--heo-card-border);--style-border-always: 1px solid var(--heo-card-border);--style-border-hover: 1px solid var(--heo-main);--style-border-hover-always: 1px solid var(--heo-main);--style-border-dashed: 1px dashed var(--heo-theme-op);--style-border-forever: 2px solid var(--heo-main)}[data-theme=light]{--heo-theme: #425aef;--heo-theme-op: #4259ef23;--heo-theme-op-deep: #4259efdd;--heo-theme-none: #4259ef01;--heo-blue: #425aef;--heo-red: #f04a63;--heo-pink: #ff7c7c;--heo-green: #57bd6a;--heo-yellow: #c28b00;--heo-yellow-op: #d99c001a;--heo-orange: #e38100;--heo-fontcolor: #363636;--heo-background: #f7f9fe;--heo-reverse: #000;--heo-maskbg: rgba(255, 255, 255, .6);--heo-maskbgdeep: rgba(255, 255, 255, .85);--heo-hovertext: var(--heo-main);--heo-ahoverbg: #f7f7fa;--heo-lighttext: var(--heo-main);--heo-secondtext: rgba(60, 60, 67, .8);--heo-scrollbar: rgba(60, 60, 67, .4);--heo-card-btn-bg: #edf0f7;--heo-post-blockquote-bg: #fafcff;--heo-post-tabs-bg: #f2f5f8;--heo-secondbg: #f1f3f8;--heo-shadow-nav: 0 5px 12px -5px rgba(102, 68, 68, .05);--heo-card-bg: #fff;--heo-card-bg-op: var(--heo-black-op);--heo-card-bg-none: rgba(255, 255, 255, 0);--heo-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-card-border: #e3e8f7;--heo-shadow-border: 0 8px 16px -4px #2c2d300c;--style-border: 1px solid var(--heo-card-border);--style-border-always: 1px solid var(--heo-card-border);--style-border-hover: 1px solid var(--heo-main);--style-border-hover-always: 1px solid var(--heo-main);--style-border-dashed: 1px dashed var(--heo-theme-op);--style-border-forever: 2px solid var(--heo-main)}[data-theme=dark],body.dark,body.dark-theme{--heo-theme: #f2b94b;--heo-theme-op: #f2b94b23;--heo-theme-op-deep: #f2b94bdd;--heo-theme-none: #f2b94b00;--heo-blue: #0084ff;--heo-red: #ff3842;--heo-pink: #d44040;--heo-green: #3e9f50;--heo-yellow: #ffc93e;--heo-yellow-op: #ffc93e30;--heo-orange: #ff953e;--heo-fontcolor: #f7f7fa;--heo-background: #18171d;--heo-reverse: #fff;--heo-maskbg: rgba(0, 0, 0, .6);--heo-maskbgdeep: rgba(0, 0, 0, .85);--heo-hovertext: #0a84ff;--heo-ahoverbg: #fff;--heo-lighttext: var(--heo-theme);--heo-secondtext: #a1a2b8;--heo-scrollbar: rgba(200, 200, 223, .4);--heo-card-btn-bg: #30343f;--heo-post-blockquote-bg: #000;--heo-post-tabs-bg: #121212;--heo-secondbg: #30343f;--heo-shadow-nav: 0 5px 20px 0px rgba(28, 28, 28, .4);--heo-card-bg: #1d1e22;--heo-card-bg-op: var(--heo-white-op);--heo-card-bg-none: #1d1b2600;--heo-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-card-border: #3d3d3f;--heo-shadow-border: 0 8px 16px -4px #00000050;--style-border: 1px solid var(--heo-card-border);--style-border-always: 1px solid var(--heo-card-border);--style-border-hover: 1px solid var(--heo-theme);--style-border-hover-always: 1px solid var(--heo-theme);--style-border-dashed: 1px dashed var(--heo-theme-op);--style-border-forever: 2px solid var(--heo-lighttext)}.post-TianliGPT{background:var(--heo-secondbg);border-radius:12px;padding:12px;line-height:1.3;border:var(--style-border-always);margin:16px 0}@media screen and (max-width: 768px){.post-TianliGPT{margin-top:22px}}.tianliGPT-title{display:flex;color:var(--heo-lighttext);border-radius:8px;align-items:center;padding:0 12px;cursor:default;-webkit-user-select:none;user-select:none;position:relative}.tianliGPT-title-text{font-weight:700;margin-left:8px;line-height:1}.tianliGPT-explanation{margin-top:12px;padding:8px 12px;background:var(--heo-card-bg);border-radius:8px;border:var(--style-border-always);font-size:15px;line-height:1.4;display:flex}.tianliGPT-suggestions{display:flex;flex-wrap:wrap}.tianliGPT-suggestions .tianliGPT-suggestions-item{margin-top:12px;padding:8px 12px;background:var(--heo-card-bg);border-radius:8px 8px 8px 0;border:var(--style-border-always);font-size:15px;line-height:1.4;display:flex;width:fit-content;margin-right:12px;cursor:pointer;transition:.3s}.tianliGPT-suggestions .tianliGPT-suggestions-item:hover{background:var(--heo-main);color:var(--heo-white)}.blinking-cursor{background-color:var(--heo-main);width:10px;height:16px;display:inline-block;vertical-align:middle;animation:blinking-cursor .5s infinite;-webkit-animation:blinking-cursor .5s infinite;margin-left:4px}@keyframes blinking-cursor{0%{opacity:1}40%{opacity:1}50%{opacity:0}90%{opacity:0}to{opacity:1}}.tianliGPT-tag{font-size:12px;background-color:var(--heo-lighttext);color:var(--heo-card-bg);font-weight:700;border-radius:4px;margin-left:auto;line-height:1;padding:4px;display:flex;align-items:center;justify-content:center;transition:all .3s,background-color 0s;position:absolute;right:12px}ins.adsbygoogle{margin:16px 0;background:var(--heo-card-bg);border-radius:12px;overflow:hidden;border:var(--style-border-always)}#tianliGPT-Toggle{font-size:12px;background:var(--heo-lighttext);color:var(--heo-card-bg);padding:4px;border-radius:4px;margin-left:6px;transform:scale(.8);cursor:pointer;transition:.3s;font-weight:700}#tianliGPT-Toggle:hover{background:var(--heo-fontcolor);color:var(--heo-card-bg)}.tianliGPT-title-icon{width:20px;height:20px}.tianliGPT-title-icon svg{width:20px;height:20px;fill:var(--heo-main)}.tianliGPT-title-icon svg path{fill:var(--heo-main)}.tianliGPT-tag svg{fill:#7e8a97}@keyframes breathe{0%{-webkit-transform:scale(.97);-moz-transform:scale(.97);-o-transform:scale(.97);-ms-transform:scale(.97);transform:scale(.97)}50%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-o-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(.97);-moz-transform:scale(.97);-o-transform:scale(.97);-ms-transform:scale(.97);transform:scale(.97)}}.tianliGPT-tag.playing svg{animation:.5s linear 0s infinite normal none running breathe;transform-origin:center;width:20px;height:20px}")),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
"use strict";const A='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><g id="机器人" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"><path id="形状结合" fill="#444" fill-rule="nonzero" d="M34.718 5.036a2.59 2.59 0 0 1 2.127 2.977l-1.05 6.302h2.58A8.625 8.625 0 0 1 47 22.94v11.5a8.625 8.625 0 0 1-8.625 8.625H9.625A8.625 8.625 0 0 1 1 34.44v-11.5a8.625 8.625 0 0 1 8.625-8.625h2.58l-1.05-6.302a2.588 2.588 0 0 1 5.105-.85l1.15 6.9q.021.127.03.252h13.12q.009-.126.03-.253l1.15-6.9a2.59 2.59 0 0 1 2.978-2.126m3.657 14.454H9.625a3.45 3.45 0 0 0-3.45 3.45v11.5a3.45 3.45 0 0 0 3.45 3.45h28.75a3.45 3.45 0 0 0 3.45-3.45v-11.5a3.45 3.45 0 0 0-3.45-3.45m-23.517 4.313a2.59 2.59 0 0 1 2.587 2.587v2.3a2.588 2.588 0 0 1-5.175 0v-2.3a2.59 2.59 0 0 1 2.588-2.587m18.284 0a2.59 2.59 0 0 1 2.588 2.587v2.3a2.588 2.588 0 0 1-5.175 0v-2.3a2.59 2.59 0 0 1 2.587-2.587"/></g></svg>';console.log(`
 %c Post-Abstract-AI 开源博客文章摘要AI生成工具 %c https://github.com/zhheo/Post-Abstract-AI 
`,"color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;");function P(p){let s=!1;function r(n){G();const t=document.querySelector(n);if(!t)return;const o=document.createElement("div");o.className="post-TianliGPT";const a=document.createElement("div");a.className="tianliGPT-title",o.appendChild(a);const e=document.createElement("i");e.className="tianliGPT-title-icon",a.appendChild(e),e.innerHTML=A;const i=document.createElement("div");i.className="tianliGPT-title-text",i.textContent="AI摘要",a.appendChild(i);const l=document.createElement("div");l.className="tianliGPT-tag",l.id="tianliGPT-tag",l.textContent="TianliGPT",a.appendChild(l);const c=document.createElement("div");c.className="tianliGPT-explanation",c.innerHTML='生成中...<span class="blinking-cursor"></span>',o.appendChild(c),t.insertBefore(o,t.firstChild)}function G(){var t;const n=document.querySelector(".post-TianliGPT");n&&((t=n.parentElement)==null||t.removeChild(n))}const T={getTitleAndContent:function(){try{const n=document.title,t=document.querySelector(tianliGPT_postSelector);if(!t)return console.warn("TianliGPT：找不到文章容器。请尝试将引入的代码放入到文章容器之后。如果本身没有打算使用摘要功能可以忽略此提示。"),"";const o=t.getElementsByTagName("p"),a=t.querySelectorAll("h1, h2, h3, h4, h5");let e="";for(let u of a)e+=u.innerText+" ";for(let u of o){const d=u.innerText.replace(/https?:\/\/[^\s]+/g,"");e+=d}const i=n+" "+e;let l=1e3;return typeof tianliGPT_wordLimit<"u"&&(l=tianliGPT_wordLimit),i.slice(0,l)}catch(n){return console.error("TianliGPT错误：可能由于一个或多个错误导致没有正常运行，原因出在获取文章容器中的内容失败，或者可能是在文章转换过程中失败。",n),""}},fetchTianliGPT:async function(n){if(!tianliGPT_key)return"没有获取到key，代码可能没有安装正确。如果你需要在tianli_gpt文件引用前定义tianliGPT_key变量。详细请查看文档。";if(tianliGPT_key==="5Q5mpqRK5DkwT1X9Gi5e")return"请购买 key 使用，如果你能看到此条内容，则说明代码安装正确。";const t=window.location.href,o=document.title,a=`https://summary.tianli0.top/?content=${encodeURIComponent(n)}&key=${encodeURIComponent(tianliGPT_key)}&url=${encodeURIComponent(t)}&title=${encodeURIComponent(o)}`;try{const e=new AbortController,i=await fetch(a,{signal:e.signal});if(i.ok){const l=await i.json();return{summary:l.summary,audioId:l.id}}else throw i.status===402&&document.querySelectorAll(".post-TianliGPT").forEach(l=>{l.style.display="none"}),new Error("TianliGPT：余额不足，请充值后请求新的文章")}catch(e){return e.name==="AbortError"?window.location.hostname==="localhost"?(console.warn("警告：请勿在本地主机上测试 API 密钥。"),"获取文章摘要超时。请勿在本地主机上测试 API 密钥。"):(console.error("请求超时"),"获取文章摘要超时。当你出现这个问题时，可能是key或者绑定的域名不正确。也可能是因为文章过长导致的 AI 运算量过大，您可以稍等一下然后刷新页面重试。"):(console.error("请求失败：",e),"获取文章摘要失败，请稍后再试。")}},aiShowAnimation:function(n=""){const t=document.querySelector(".tianliGPT-explanation");if(!t||s)return;if(typeof tianliGPT_typingAnimate<"u"&&!tianliGPT_typingAnimate){t.innerHTML=n;return}s=!0;const o=25,a=6;t.style.display="block",t.innerHTML='生成中...<span class="blinking-cursor"></span>';let e=!0,i=0,l=!0,c=performance.now();const u=()=>{if(i<n.length&&e){const m=performance.now(),y=m-c,v=n.slice(i,i+1),w=/[，。！、？,.!?]/.test(v)?o*a:o;y>=w&&(t.innerText=n.slice(0,i+1),c=m,i++,i<n.length?t.innerHTML=n.slice(0,i)+'<span class="blinking-cursor"></span>':(t.innerHTML=n,t.style.display="block",s=!1,d.disconnect())),requestAnimationFrame(u)}},d=new IntersectionObserver(m=>{e=m[0].isIntersecting,e&&l&&setTimeout(()=>{requestAnimationFrame(u)},200)},{threshold:0});let h=document.querySelector(".post-TianliGPT");h&&d.observe(h)}};function f(){r(tianliGPT_postSelector);const n=T.getTitleAndContent();n&&console.log("TianliGPT本次提交的内容为："+n),T.fetchTianliGPT(n).then(t=>{if(typeof t=="string"){const i=document.querySelector(".tianliGPT-explanation");i&&(i.textContent=t);return}const o=t.summary,a=t.audioId,e=document.querySelector(".tianliGPT-tag");e&&(e.dataset.audioId=a,T.aiShowAnimation(o))})}function g(){if(typeof tianliGPT_postURL>"u"){f();return}try{const n=e=>new RegExp("^"+e.split(/\*+/).map(t).join(".*")+"$"),t=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\{{input}}"),o=n(tianliGPT_postURL),a=window.location.href;o.test(a)?f():console.log("TianliGPT：因为不符合自定义的链接规则，我决定不执行摘要功能。")}catch(n){console.error("TianliGPT：我没有看懂你编写的自定义链接规则，所以我决定不执行摘要功能",n)}}p?g():document.addEventListener("DOMContentLoaded",function(){g()})}P(!1);document.addEventListener("pjax:complete",function(){P(!0)});function I(){return console.warn("音频功能暂时不可用")}document.addEventListener("click",function(p){const s=p.target,r=document.querySelector(".tianliGPT-tag");r&&(r.addEventListener("click",function(){r.classList.toggle("playing")}),(s===r||r.contains(s))&&I())});
