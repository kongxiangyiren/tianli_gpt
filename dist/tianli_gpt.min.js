(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(":root{--heo-white: #fff;--heo-white-op: rgba(255, 255, 255, .2);--heo-black: #000;--heo-black-op: rgba(0, 0, 0, .2);--heo-none: #00000000;--heo-gray: #999999;--heo-gray-op: #9999992b;--heo-vip: #e5a80d;--heo-main: var(--heo-theme);--heo-main-op: var(--heo-theme-op);--heo-main-op-deep: var(--heo-theme-op-deep);--heo-main-none: var(--heo-theme-none);--heo-shadow-theme: 0 8px 12px -3px var(--heo-theme-op);--heo-shadow-blackdeep: 0 2px 16px -3px rgba(0, 0, 0, .15);--heo-shadow-main: 0 8px 12px -3px var(--heo-main-op);--heo-shadow-blue: 0 8px 12px -3px rgba(40, 109, 234, .2);--heo-shadow-white: 0 8px 12px -3px rgba(255, 255, 255, .2);--heo-shadow-black: 0 0 12px 4px rgba(0, 0, 0, .05);--heo-shadow-yellow: 0px 38px 77px -26px rgba(255, 201, 62, .12);--heo-shadow-red: 0 8px 12px -3px #ee7d7936;--heo-shadow-green: 0 8px 12px -3px #87ee7936;--heo-logo-color: linear-gradient(215deg, #4584ff 0%, #cf0db9 100%);--heo-snackbar-time: 5s;--heo-theme: #425AEF;--heo-theme-op: #4259ef23;--heo-theme-op-deep: #4259efdd;--heo-theme-none: #4259ef01;--heo-blue: #425AEF;--heo-red: #f04a63;--heo-pink: #FF7C7C;--heo-green: #57bd6a;--heo-yellow: #c28b00;--heo-yellow-op: #d99c001a;--heo-orange: #e38100;--heo-fontcolor: #363636;--heo-background: #f7f9fe;--heo-reverse: #000;--heo-maskbg: rgba(255, 255, 255, .6);--heo-maskbgdeep: rgba(255, 255, 255, .85);--heo-hovertext: var(--heo-main);--heo-ahoverbg: #F7F7FA;--heo-lighttext: var(--heo-main);--heo-secondtext: rgba(60, 60, 67, .8);--heo-scrollbar: rgba(60, 60, 67, .4);--heo-card-btn-bg: #edf0f7;--heo-post-blockquote-bg: #fafcff;--heo-post-tabs-bg: #f2f5f8;--heo-secondbg: #f1f3f8;--heo-shadow-nav: 0 5px 12px -5px rgba(102, 68, 68, .05);--heo-card-bg: #fff;--heo-card-bg-op: var(--heo-black-op);--heo-card-bg-none: rgba(255, 255, 255, 0);--heo-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-card-border: #e3e8f7;--heo-shadow-border: 0 8px 16px -4px #2c2d300c;--style-border: 1px solid var(--heo-card-border);--style-border-always: 1px solid var(--heo-card-border);--style-border-hover: 1px solid var(--heo-main);--style-border-hover-always: 1px solid var(--heo-main);--style-border-dashed: 1px dashed var(--heo-theme-op);--style-border-forever: 2px solid var(--heo-main)}[data-theme=light]{--heo-theme: #425AEF;--heo-theme-op: #4259ef23;--heo-theme-op-deep: #4259efdd;--heo-theme-none: #4259ef01;--heo-blue: #425AEF;--heo-red: #f04a63;--heo-pink: #FF7C7C;--heo-green: #57bd6a;--heo-yellow: #c28b00;--heo-yellow-op: #d99c001a;--heo-orange: #e38100;--heo-fontcolor: #363636;--heo-background: #f7f9fe;--heo-reverse: #000;--heo-maskbg: rgba(255, 255, 255, .6);--heo-maskbgdeep: rgba(255, 255, 255, .85);--heo-hovertext: var(--heo-main);--heo-ahoverbg: #F7F7FA;--heo-lighttext: var(--heo-main);--heo-secondtext: rgba(60, 60, 67, .8);--heo-scrollbar: rgba(60, 60, 67, .4);--heo-card-btn-bg: #edf0f7;--heo-post-blockquote-bg: #fafcff;--heo-post-tabs-bg: #f2f5f8;--heo-secondbg: #f1f3f8;--heo-shadow-nav: 0 5px 12px -5px rgba(102, 68, 68, .05);--heo-card-bg: #fff;--heo-card-bg-op: var(--heo-black-op);--heo-card-bg-none: rgba(255, 255, 255, 0);--heo-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-card-border: #e3e8f7;--heo-shadow-border: 0 8px 16px -4px #2c2d300c;--style-border: 1px solid var(--heo-card-border);--style-border-always: 1px solid var(--heo-card-border);--style-border-hover: 1px solid var(--heo-main);--style-border-hover-always: 1px solid var(--heo-main);--style-border-dashed: 1px dashed var(--heo-theme-op);--style-border-forever: 2px solid var(--heo-main)}[data-theme=dark],body.dark,body.dark-theme{--heo-theme: #f2b94b;--heo-theme-op: #f2b94b23;--heo-theme-op-deep: #f2b94bdd;--heo-theme-none: #f2b94b00;--heo-blue: #0084FF;--heo-red: #FF3842;--heo-pink: #d44040;--heo-green: #3e9f50;--heo-yellow: #ffc93e;--heo-yellow-op: #ffc93e30;--heo-orange: #ff953e;--heo-fontcolor: #F7F7FA;--heo-background: #18171d;--heo-reverse: #fff;--heo-maskbg: rgba(0, 0, 0, .6);--heo-maskbgdeep: rgba(0, 0, 0, .85);--heo-hovertext: #0A84FF;--heo-ahoverbg: #fff;--heo-lighttext: var(--heo-theme);--heo-secondtext: #a1a2b8;--heo-scrollbar: rgba(200, 200, 223, .4);--heo-card-btn-bg: #30343f;--heo-post-blockquote-bg: #000;--heo-post-tabs-bg: #121212;--heo-secondbg: #30343f;--heo-shadow-nav: 0 5px 20px 0px rgba(28, 28, 28, .4);--heo-card-bg: #1d1e22;--heo-card-bg-op: var(--heo-white-op);--heo-card-bg-none: #1d1b2600;--heo-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);--heo-card-border: #3d3d3f;--heo-shadow-border: 0 8px 16px -4px #00000050;--style-border: 1px solid var(--heo-card-border);--style-border-always: 1px solid var(--heo-card-border);--style-border-hover: 1px solid var(--heo-theme);--style-border-hover-always: 1px solid var(--heo-theme);--style-border-dashed: 1px dashed var(--heo-theme-op);--style-border-forever: 2px solid var(--heo-lighttext)}.post-TianliGPT{background:var(--heo-secondbg);border-radius:12px;padding:12px;line-height:1.3;border:var(--style-border-always);margin:16px 0}@media screen and (max-width: 768px){.post-TianliGPT{margin-top:22px}}.tianliGPT-title{display:flex;color:var(--heo-lighttext);border-radius:8px;align-items:center;padding:0 12px;cursor:default;-webkit-user-select:none;user-select:none;position:relative}.tianliGPT-title-text{font-weight:700;margin-left:8px;line-height:1}.tianliGPT-explanation{margin-top:12px;padding:8px 12px;background:var(--heo-card-bg);border-radius:8px;border:var(--style-border-always);font-size:15px;line-height:1.4;display:flex}.tianliGPT-suggestions{display:flex;flex-wrap:wrap}.tianliGPT-suggestions .tianliGPT-suggestions-item{margin-top:12px;padding:8px 12px;background:var(--heo-card-bg);border-radius:8px 8px 8px 0;border:var(--style-border-always);font-size:15px;line-height:1.4;display:flex;width:fit-content;margin-right:12px;cursor:pointer;transition:.3s}.tianliGPT-suggestions .tianliGPT-suggestions-item:hover{background:var(--heo-main);color:var(--heo-white)}.blinking-cursor{background-color:var(--heo-main);width:10px;height:16px;display:inline-block;vertical-align:middle;animation:blinking-cursor .5s infinite;-webkit-animation:blinking-cursor .5s infinite;margin-left:4px}@keyframes blinking-cursor{0%{opacity:1}40%{opacity:1}50%{opacity:0}90%{opacity:0}to{opacity:1}}.tianliGPT-tag{font-size:12px;background-color:var(--heo-lighttext);color:var(--heo-card-bg);font-weight:700;border-radius:4px;margin-left:auto;line-height:1;padding:4px;display:flex;align-items:center;justify-content:center;transition:all .3s,background-color 0s;position:absolute;right:12px}ins.adsbygoogle{margin:16px 0;background:var(--heo-card-bg);border-radius:12px;overflow:hidden;border:var(--style-border-always)}#tianliGPT-Toggle{font-size:12px;background:var(--heo-lighttext);color:var(--heo-card-bg);padding:4px;border-radius:4px;margin-left:6px;transform:scale(.8);cursor:pointer;transition:.3s;font-weight:700}#tianliGPT-Toggle:hover{background:var(--heo-fontcolor);color:var(--heo-card-bg)}.tianliGPT-title-icon{width:20px;height:20px}.tianliGPT-title-icon svg{width:20px;height:20px;fill:var(--heo-main)}.tianliGPT-title-icon svg path{fill:var(--heo-main)}.tianliGPT-tag svg{fill:#7e8a97}@keyframes breathe{0%{-webkit-transform:scale(.97);-moz-transform:scale(.97);-o-transform:scale(.97);-ms-transform:scale(.97);transform:scale(.97)}50%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-o-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(.97);-moz-transform:scale(.97);-o-transform:scale(.97);-ms-transform:scale(.97);transform:scale(.97)}}.tianliGPT-tag.playing svg{animation:.5s linear 0s infinite normal none running breathe;transform-origin:center;width:20px;height:20px}")),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
(function(f){typeof define=="function"&&define.amd?define(f):f()})(function(){"use strict";const f="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='48px'%20height='48px'%20viewBox='0%200%2048%2048'%3e%3ctitle%3e机器人%3c/title%3e%3cg%20id='&%23x673A;&%23x5668;&%23x4EBA;'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M34.717885,5.03561087%20C36.12744,5.27055371%2037.079755,6.60373651%2036.84481,8.0132786%20L35.7944,14.3153359%20L38.375,14.3153359%20C43.138415,14.3153359%2047,18.1768855%2047,22.9402569%20L47,34.4401516%20C47,39.203523%2043.138415,43.0650727%2038.375,43.0650727%20L9.625,43.0650727%20C4.861585,43.0650727%201,39.203523%201,34.4401516%20L1,22.9402569%20C1,18.1768855%204.861585,14.3153359%209.625,14.3153359%20L12.2056,14.3153359%20L11.15519,8.0132786%20C10.920245,6.60373651%2011.87256,5.27055371%2013.282115,5.03561087%20C14.69167,4.80066802%2016.024865,5.7529743%2016.25981,7.16251639%20L17.40981,14.0624532%20C17.423955,14.1470924%2017.43373,14.2315017%2017.43948,14.3153359%20L30.56052,14.3153359%20C30.56627,14.2313867%2030.576045,14.1470924%2030.59019,14.0624532%20L31.74019,7.16251639%20C31.975135,5.7529743%2033.30833,4.80066802%2034.717885,5.03561087%20Z%20M38.375,19.4902885%20L9.625,19.4902885%20C7.719565,19.4902885%206.175,21.0348394%206.175,22.9402569%20L6.175,34.4401516%20C6.175,36.3455692%207.719565,37.89012%209.625,37.89012%20L38.375,37.89012%20C40.280435,37.89012%2041.825,36.3455692%2041.825,34.4401516%20L41.825,22.9402569%20C41.825,21.0348394%2040.280435,19.4902885%2038.375,19.4902885%20Z%20M14.8575,23.802749%20C16.28649,23.802749%2017.445,24.9612484%2017.445,26.3902253%20L17.445,28.6902043%20C17.445,30.1191812%2016.28649,31.2776806%2014.8575,31.2776806%20C13.42851,31.2776806%2012.27,30.1191812%2012.27,28.6902043%20L12.27,26.3902253%20C12.27,24.9612484%2013.42851,23.802749%2014.8575,23.802749%20Z%20M33.1425,23.802749%20C34.57149,23.802749%2035.73,24.9612484%2035.73,26.3902253%20L35.73,28.6902043%20C35.73,30.1191812%2034.57149,31.2776806%2033.1425,31.2776806%20C31.71351,31.2776806%2030.555,30.1191812%2030.555,28.6902043%20L30.555,26.3902253%20C30.555,24.9612484%2031.71351,23.802749%2033.1425,23.802749%20Z'%20id='&%23x5F62;&%23x72B6;&%23x7ED3;&%23x5408;'%20fill='%23444444'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";console.log(`
 %c Post-Abstract-AI 开源博客文章摘要AI生成工具 %c https://github.com/zhheo/Post-Abstract-AI 
`,"color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;");function h(n){var s=!1;function a(t){T();const e=document.querySelector(t);if(!e)return;const l=document.createElement("div");l.className="post-TianliGPT";const r=document.createElement("div");r.className="tianliGPT-title",l.appendChild(r);const i=document.createElement("i");i.className="tianliGPT-title-icon",r.appendChild(i),i.innerHTML=f;const o=document.createElement("div");o.className="tianliGPT-title-text",o.textContent="AI摘要",r.appendChild(o);const p=document.createElement("div");p.className="tianliGPT-tag",p.id="tianliGPT-tag",p.textContent="TianliGPT",r.appendChild(p);const d=document.createElement("div");d.className="tianliGPT-explanation",d.innerHTML='生成中...<span class="blinking-cursor"></span>',l.appendChild(d),e.insertBefore(l,e.firstChild)}function T(){var e;const t=document.querySelector(".post-TianliGPT");t&&((e=t.parentElement)==null||e.removeChild(t))}var m={getTitleAndContent:function(){try{const t=document.title,e=document.querySelector(tianliGPT_postSelector);if(!e)return console.warn("TianliGPT：找不到文章容器。请尝试将引入的代码放入到文章容器之后。如果本身没有打算使用摘要功能可以忽略此提示。"),"";const l=e.getElementsByTagName("p"),r=e.querySelectorAll("h1, h2, h3, h4, h5");let i="";for(let u of r)i+=u.innerText+" ";for(let u of l){const g=u.innerText.replace(/https?:\/\/[^\s]+/g,"");i+=g}const o=t+" "+i;let p=1e3;return typeof tianliGPT_wordLimit<"u"&&(p=tianliGPT_wordLimit),o.slice(0,p)}catch(t){return console.error("TianliGPT错误：可能由于一个或多个错误导致没有正常运行，原因出在获取文章容器中的内容失败，或者可能是在文章转换过程中失败。",t),""}},fetchTianliGPT:async function(t){if(!tianliGPT_key)return"没有获取到key，代码可能没有安装正确。如果你需要在tianli_gpt文件引用前定义tianliGPT_key变量。详细请查看文档。";if(tianliGPT_key==="5Q5mpqRK5DkwT1X9Gi5e")return"请购买 key 使用，如果你能看到此条内容，则说明代码安装正确。";var e=window.location.href;const l=document.title,r=`https://summary.tianli0.top/?content=${encodeURIComponent(t)}&key=${encodeURIComponent(tianliGPT_key)}&url=${encodeURIComponent(e)}&title=${encodeURIComponent(l)}`,i=2e4;try{const o=new AbortController,p=setTimeout(()=>o.abort(),i),d=await fetch(r,{signal:o.signal});if(d.ok){const u=await d.json();return{summary:u.summary,audioId:u.id}}else throw d.status===402&&document.querySelectorAll(".post-TianliGPT").forEach(u=>{u.style.display="none"}),new Error("TianliGPT：余额不足，请充值后请求新的文章")}catch(o){return o.name==="AbortError"?window.location.hostname==="localhost"?(console.warn("警告：请勿在本地主机上测试 API 密钥。"),"获取文章摘要超时。请勿在本地主机上测试 API 密钥。"):(console.error("请求超时"),"获取文章摘要超时。当你出现这个问题时，可能是key或者绑定的域名不正确。也可能是因为文章过长导致的 AI 运算量过大，您可以稍等一下然后刷新页面重试。"):(console.error("请求失败：",o),"获取文章摘要失败，请稍后再试。")}},aiShowAnimation:function(t=""){const e=document.querySelector(".tianliGPT-explanation");if(!e||s)return;if(typeof tianliGPT_typingAnimate<"u"&&!tianliGPT_typingAnimate){e.innerHTML=t;return}s=!0;const l=25,r=6;e.style.display="block",e.innerHTML='生成中...<span class="blinking-cursor"></span>';let i=!0,o=0,p=!0,d=performance.now();const u=()=>{if(o<t.length&&i){const y=performance.now(),C=y-d,G=t.slice(o,o+1),x=/[，。！、？,.!?]/.test(G)?l*r:l;C>=x&&(e.innerText=t.slice(0,o+1),d=y,o++,o<t.length?e.innerHTML=t.slice(0,o)+'<span class="blinking-cursor"></span>':(e.innerHTML=t,e.style.display="block",s=!1,g.disconnect())),requestAnimationFrame(u)}},g=new IntersectionObserver(y=>{i=y[0].isIntersecting,i&&p&&setTimeout(()=>{requestAnimationFrame(u)},200)},{threshold:0});let P=document.querySelector(".post-TianliGPT");P&&g.observe(P)}};function L(){a(tianliGPT_postSelector);const t=m.getTitleAndContent();t&&console.log("TianliGPT本次提交的内容为："+t),m.fetchTianliGPT(t).then(e=>{const l=e.summary,r=e.audioId,i=document.querySelector(".tianliGPT-tag");i&&(i.dataset.audioId=r,m.aiShowAnimation(l))})}function w(){if(typeof tianliGPT_postURL>"u"){L();return}try{const t=i=>new RegExp("^"+i.split(/\*+/).map(e).join(".*")+"$"),e=i=>i.replace(/[|\\{}()[\]^$+*?.]/g,"\\{{input}}"),l=t(tianliGPT_postURL),r=window.location.href;l.test(r)?L():console.log("TianliGPT：因为不符合自定义的链接规则，我决定不执行摘要功能。")}catch(t){console.error("TianliGPT：我没有看懂你编写的自定义链接规则，所以我决定不执行摘要功能",t)}}n?w():document.addEventListener("DOMContentLoaded",function(){w()})}h(!1),document.addEventListener("pjax:complete",function(){h(!0)}),document.addEventListener("click",function(n){const s=n.target;s&&s.classList.contains("tianliGPT-tag")&&v()});var c=null;function v(){if(c&&!c.paused)c.pause();else{if(!c){const a=document.querySelector(".tianliGPT-tag");if(!a)return;const T=a.dataset.audioId;if(!T){console.error("未找到音频 ID");return}const m=`https://summary.tianli0.top/audio?id=${encodeURIComponent(T)}&key=${encodeURIComponent(tianliGPT_key)}`;c=new Audio(m),c.addEventListener("ended",()=>{a.classList.remove("playing")}),c.addEventListener("play",()=>{a.classList.add("playing")}),c.addEventListener("pause",()=>{a.classList.remove("playing")})}setTimeout(()=>{c==null||c.play().catch(a=>{console.error("播放音频失败:",a)})},100)}const n=document.querySelector(".tianliGPT-tag");if(!n)return;n.addEventListener("click",function(){n.classList.toggle("playing")});const s='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692880829044" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2346" data-darkreader-inline-fill="" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><path d="M512 1024a512 512 0 1 0 0-1024 512 512 0 1 0 0 1024z m0-704a192 192 0 1 1 0 384 192 192 0 1 1 0-384z" p-id="2347"></path></svg>';n.classList.contains("playing")?(n.innerHTML=s,n.style.animation="",n.style.color="#ff0000",n.style.backgroundColor="transparent",n.style.padding="0"):(n.innerHTML=s,n.style.animation="",n.style.color="#000000",n.style.backgroundColor="transparent",n.style.padding="0")}document.addEventListener("click",function(n){const s=n.target,a=document.querySelector(".tianliGPT-tag");a&&(a.addEventListener("click",function(){a.classList.toggle("playing")}),(s===a||a.contains(s))&&v())})});
